<!-- Connection Tab - Add this to your existing index.html -->
<div id="connection-tab" class="tab-content">
    <h2>ğŸ”— DERIV CONNECTION</h2>
    
    <div class="form-group">
        <label>API Token:</label>
        <input type="password" id="api-token" placeholder="Enter your Deriv API token">
    </div>
    
    <div class="form-group">
        <label>Account Type:</label>
        <select id="account-type">
            <option value="demo" selected>ğŸŸ¢ DEMO Account (Virtual - Safe to Test)</option>
            <option value="real">ğŸ”´ REAL Account (Live Money - Trade with Caution)</option>
        </select>
        <small style="color: #B8860B;">Your token can access both demo and real accounts</small>
    </div>
    
    <div class="button-group">
        <button onclick="connectDeriv()">ğŸ”— CONNECT</button>
        <button onclick="disconnectDeriv()">ğŸ”Œ DISCONNECT</button>
    </div>
    
    <div id="available-accounts" style="display: none; margin-top: 15px; border: 1px solid #FFD700; padding: 10px;">
        <h3>ğŸ“‹ Available Accounts:</h3>
        <div id="accounts-list"></div>
    </div>
    
    <div id="connection-log" class="log-container" style="margin-top: 15px;"></div>
</div>

<script>
function connectDeriv() {
    const token = document.getElementById('api-token').value;
    const accountType = document.getElementById('account-type').value;
    
    if (!token) {
        alert('Please enter API token');
        return;
    }
    
    addLog(`ğŸ”Œ Connecting to Deriv (${accountType} account)...`);
    
    fetch('/api/connect', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({token: token, account_type: accountType})
    })
    .then(res => res.json())
    .then(data => {
        if (data.success) {
            document.getElementById('connection-status').innerHTML = 'CONNECTED';
            document.getElementById('connection-status').className = 'status-on';
            addLog('âœ… ' + data.message);
            
            if (data.balance) {
                addLog(`ğŸ’° Balance: ${data.balance.balance} ${data.balance.currency}`);
                
                if (data.balance.available_accounts && data.balance.available_accounts.length > 1) {
                    displayAccounts(data.balance.available_accounts);
                }
            }
        } else {
            addLog('âŒ ' + data.message);
        }
    })
    .catch(err => addLog('âŒ Connection error: ' + err));
}

function displayAccounts(accounts) {
    const container = document.getElementById('available-accounts');
    const list = document.getElementById('accounts-list');
    
    list.innerHTML = '';
    accounts.forEach(acc => {
        const color = acc.account_type === 'real' ? '#FF4444' : '#00FF00';
        list.innerHTML += `
            <div style="padding: 5px; border-bottom: 1px solid #333;">
                <span style="color: ${color};">â—</span>
                <span style="color: #FFD700;">${acc.loginid}</span>
                <span style="color: #B8860B;">[${acc.account_type}]</span>
                <span style="float: right;">${acc.balance} ${acc.currency}</span>
            </div>
        `;
    });
    
    container.style.display = 'block';
}

function disconnectDeriv() {
    fetch('/api/disconnect', {method: 'POST'})
    .then(res => res.json())
    .then(() => {
        document.getElementById('connection-status').innerHTML = 'DISCONNECTED';
        document.getElementById('connection-status').className = 'status-off';
        document.getElementById('available-accounts').style.display = 'none';
        addLog('ğŸ”Œ Disconnected');
    });
}

function addLog(msg) {
    const log = document.getElementById('connection-log');
    const time = new Date().toLocaleTimeString();
    log.innerHTML = `<div>[${time}] ${msg}</div>` + log.innerHTML;
}
</script>
